// Licensed to the .NET Foundation under one or more agreements.
// The .NET Foundation licenses this file to you under the MIT license.

namespace Microsoft.EntityFrameworkCore.Query.Relationships.OwnedTableSplitting;

public class OwnedTableSplittingProjectionSqlServerTest
    : OwnedTableSplittingProjectionRelationalTestBase<OwnedTableSplittingRelationshipsSqlServerFixture>
{
    public OwnedTableSplittingProjectionSqlServerTest(OwnedTableSplittingRelationshipsSqlServerFixture fixture, ITestOutputHelper testOutputHelper)
        : base(fixture)
    {
        Fixture.TestSqlLoggerFactory.Clear();
        Fixture.TestSqlLoggerFactory.SetTestOutputHelper(testOutputHelper);
    }

    public override async Task Select_root(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_root(async, queryTrackingBehavior);

        AssertSql(
            """
SELECT [r].[Id], [r].[Name], [r].[OptionalReferenceTrunkId], [r].[RequiredReferenceTrunkId], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r7].[RelationshipsRootId], [r8].[RelationshipsTrunkRelationshipsRootId], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[RelationshipsTrunkRelationshipsRootId], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsRootId], [s0].[Id1], [s0].[Name], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchRelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchRelationshipsTrunkId10], [s0].[RelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsTrunkId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchRelationshipsTrunkId11], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s0].[RelationshipsBranchRelationshipsTrunkId12], [s0].[RelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsTrunkId11], [s0].[Id10], [s0].[Name0], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s0].[RelationshipsBranchRelationshipsTrunkId13], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s0].[RelationshipsBranchRelationshipsTrunkId100], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s0].[RelationshipsBranchRelationshipsTrunkId110], [s0].[RelationshipsBranchId11], [s0].[Id100], [s0].[Name00], [s0].[Name1], [s0].[Name2], [s0].[Name3], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s0].[RelationshipsBranchRelationshipsTrunkId14], [s0].[Id11], [s0].[Name4], [s0].[Name5], [s0].[Name6], [s0].[Name7], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s0].[RelationshipsBranchRelationshipsTrunkId15], [s0].[Id12], [s0].[Name8], [s0].[Name9], [s0].[Name10], [r0].[Name], [s1].[RelationshipsTrunkRelationshipsRootId], [s1].[Id1], [s1].[Name], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s1].[RelationshipsBranchId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s1].[RelationshipsBranchId10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s1].[RelationshipsBranchId11], [s1].[Id10], [s1].[Name0], [s1].[Name1], [s1].[Name2], [r1].[Name], [r31].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r31].[Id1], [r31].[Name], [r2].[Name], [r3].[Name], [r4].[Name], [r32].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r32].[Id1], [r32].[Name], [r5].[Name], [r6].[Name], [r7].[Name], [s2].[RelationshipsTrunkRelationshipsRootId], [s2].[Id1], [s2].[Name], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s2].[RelationshipsBranchId1], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s2].[RelationshipsBranchId10], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s2].[RelationshipsBranchId11], [s2].[Id10], [s2].[Name0], [s2].[Name1], [s2].[Name2], [r8].[Name], [r37].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r37].[Id1], [r37].[Name], [r9].[Name], [r10].[Name], [r11].[Name], [r38].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r38].[Id1], [r38].[Name], [r12].[Name], [r13].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_OptionalReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch] AS [r4] ON [r0].[RelationshipsRootId] = [r4].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r5] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r6] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r7] ON [r].[Id] = [r7].[RelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch] AS [r8] ON [r7].[RelationshipsRootId] = [r8].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r9] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r10] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch] AS [r11] ON [r7].[RelationshipsRootId] = [r11].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r12] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r13] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r14].[RelationshipsRootId], [r14].[Id1], [r14].[Name], [r15].[RelationshipsTrunkRelationshipsRootId], [r15].[RelationshipsTrunkId1], [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r16].[RelationshipsBranchRelationshipsTrunkId1], [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r17].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r18].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId0], [r18].[RelationshipsTrunkId1] AS [RelationshipsTrunkId10], [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r19].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r20].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [r20].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId12], [s].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsTrunkId1] AS [RelationshipsTrunkId11], [s].[Id1] AS [Id10], [s].[Name] AS [Name0], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId13], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s].[RelationshipsBranchRelationshipsTrunkId10] AS [RelationshipsBranchRelationshipsTrunkId100], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s].[RelationshipsBranchRelationshipsTrunkId11] AS [RelationshipsBranchRelationshipsTrunkId110], [s].[RelationshipsBranchId11], [s].[Id10] AS [Id100], [s].[Name0] AS [Name00], [s].[Name1], [s].[Name2], [r15].[Name] AS [Name3], [r25].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [r25].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId14], [r25].[Id1] AS [Id11], [r25].[Name] AS [Name4], [r16].[Name] AS [Name5], [r17].[Name] AS [Name6], [r18].[Name] AS [Name7], [r26].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [r26].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId15], [r26].[Id1] AS [Id12], [r26].[Name] AS [Name8], [r19].[Name] AS [Name9], [r20].[Name] AS [Name10]
    FROM [RelationshipsRoot_CollectionTrunk] AS [r14]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch] AS [r15] ON [r14].[RelationshipsRootId] = [r15].[RelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r15].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r16] ON [r15].[RelationshipsTrunkRelationshipsRootId] = [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r15].[RelationshipsTrunkId1] = [r16].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r17] ON [r15].[RelationshipsTrunkRelationshipsRootId] = [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r15].[RelationshipsTrunkId1] = [r17].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch] AS [r18] ON [r14].[RelationshipsRootId] = [r18].[RelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r18].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r19] ON [r18].[RelationshipsTrunkRelationshipsRootId] = [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r18].[RelationshipsTrunkId1] = [r19].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r20] ON [r18].[RelationshipsTrunkRelationshipsRootId] = [r20].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r18].[RelationshipsTrunkId1] = [r20].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN (
        SELECT [r21].[RelationshipsTrunkRelationshipsRootId], [r21].[RelationshipsTrunkId1], [r21].[Id1], [r21].[Name], [r22].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r22].[RelationshipsBranchRelationshipsTrunkId1], [r22].[RelationshipsBranchId1], [r23].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r23].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r23].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r24].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r24].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r24].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r24].[Id1] AS [Id10], [r24].[Name] AS [Name0], [r22].[Name] AS [Name1], [r23].[Name] AS [Name2]
        FROM [RelationshipsRoot_CollectionTrunk_CollectionBranch] AS [r21]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r22] ON [r21].[RelationshipsTrunkRelationshipsRootId] = [r22].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r21].[RelationshipsTrunkId1] = [r22].[RelationshipsBranchRelationshipsTrunkId1] AND [r21].[Id1] = [r22].[RelationshipsBranchId1]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r23] ON [r21].[RelationshipsTrunkRelationshipsRootId] = [r23].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r21].[RelationshipsTrunkId1] = [r23].[RelationshipsBranchRelationshipsTrunkId1] AND [r21].[Id1] = [r23].[RelationshipsBranchId1]
        LEFT JOIN [RelationshipsRoot_CollectionTrunk_CollectionBranch_CollectionLeaf] AS [r24] ON [r21].[RelationshipsTrunkRelationshipsRootId] = [r24].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r21].[RelationshipsTrunkId1] = [r24].[RelationshipsBranchRelationshipsTrunkId1] AND [r21].[Id1] = [r24].[RelationshipsBranchId1]
    ) AS [s] ON [r14].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [s].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r25] ON [r15].[RelationshipsTrunkRelationshipsRootId] = [r25].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r15].[RelationshipsTrunkId1] = [r25].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r26] ON [r18].[RelationshipsTrunkRelationshipsRootId] = [r26].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r18].[RelationshipsTrunkId1] = [r26].[RelationshipsBranchRelationshipsTrunkId1]
) AS [s0] ON [r].[Id] = [s0].[RelationshipsRootId]
LEFT JOIN (
    SELECT [r27].[RelationshipsTrunkRelationshipsRootId], [r27].[Id1], [r27].[Name], [r28].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r28].[RelationshipsBranchId1], [r29].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r29].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r30].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r30].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r30].[Id1] AS [Id10], [r30].[Name] AS [Name0], [r28].[Name] AS [Name1], [r29].[Name] AS [Name2]
    FROM [Root_OptionalReferenceTrunk_CollectionBranch] AS [r27]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r28] ON [r27].[RelationshipsTrunkRelationshipsRootId] = [r28].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r27].[Id1] = [r28].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r29] ON [r27].[RelationshipsTrunkRelationshipsRootId] = [r29].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r27].[Id1] = [r29].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r30] ON [r27].[RelationshipsTrunkRelationshipsRootId] = [r30].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r27].[Id1] = [r30].[RelationshipsBranchId1]
) AS [s1] ON [r0].[RelationshipsRootId] = [s1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r31] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r31].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r32] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r32].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r33].[RelationshipsTrunkRelationshipsRootId], [r33].[Id1], [r33].[Name], [r34].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r34].[RelationshipsBranchId1], [r35].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r35].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r36].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r36].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r36].[Id1] AS [Id10], [r36].[Name] AS [Name0], [r34].[Name] AS [Name1], [r35].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r33]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r34] ON [r33].[RelationshipsTrunkRelationshipsRootId] = [r34].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r33].[Id1] = [r34].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r35] ON [r33].[RelationshipsTrunkRelationshipsRootId] = [r35].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r33].[Id1] = [r35].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r36] ON [r33].[RelationshipsTrunkRelationshipsRootId] = [r36].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r33].[Id1] = [r36].[RelationshipsBranchId1]
) AS [s2] ON [r7].[RelationshipsRootId] = [s2].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r37] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r37].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r38] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r38].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r7].[RelationshipsRootId], [r8].[RelationshipsTrunkRelationshipsRootId], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[RelationshipsTrunkRelationshipsRootId], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsRootId], [s0].[Id1], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchRelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchRelationshipsTrunkId10], [s0].[RelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsTrunkId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchRelationshipsTrunkId11], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s0].[RelationshipsBranchRelationshipsTrunkId12], [s0].[RelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsTrunkId11], [s0].[Id10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s0].[RelationshipsBranchRelationshipsTrunkId13], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s0].[RelationshipsBranchRelationshipsTrunkId100], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s0].[RelationshipsBranchRelationshipsTrunkId110], [s0].[RelationshipsBranchId11], [s0].[Id100], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s0].[RelationshipsBranchRelationshipsTrunkId14], [s0].[Id11], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s0].[RelationshipsBranchRelationshipsTrunkId15], [s0].[Id12], [s1].[RelationshipsTrunkRelationshipsRootId], [s1].[Id1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s1].[RelationshipsBranchId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s1].[RelationshipsBranchId10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s1].[RelationshipsBranchId11], [s1].[Id10], [r31].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r31].[Id1], [r32].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r32].[Id1], [s2].[RelationshipsTrunkRelationshipsRootId], [s2].[Id1], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s2].[RelationshipsBranchId1], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s2].[RelationshipsBranchId10], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s2].[RelationshipsBranchId11], [s2].[Id10], [r37].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r37].[Id1], [r38].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
    }

    public override async Task Select_trunk_optional(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_trunk_optional(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r0].[RelationshipsRootId], [r0].[Name], [r].[Id], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[Name], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [s].[Name0], [s].[Name1], [s].[Name2], [r1].[Name], [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[Id1], [r11].[Name], [r2].[Name], [r3].[Name], [r4].[Name], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r12].[Id1], [r12].[Name], [r5].[Name], [r6].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_OptionalReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch] AS [r4] ON [r0].[RelationshipsRootId] = [r4].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r5] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r6] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r7].[RelationshipsTrunkRelationshipsRootId], [r7].[Id1], [r7].[Name], [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r8].[RelationshipsBranchId1], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r9].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r10].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r10].[Id1] AS [Id10], [r10].[Name] AS [Name0], [r8].[Name] AS [Name1], [r9].[Name] AS [Name2]
    FROM [Root_OptionalReferenceTrunk_CollectionBranch] AS [r7]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r8] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[Id1] = [r8].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r9] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[Id1] = [r9].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r10] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[Id1] = [r10].[RelationshipsBranchId1]
) AS [s] ON [r0].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r11] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r12] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[Id1], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_trunk_required(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_trunk_required(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r0].[RelationshipsRootId], [r0].[Name], [r].[Id], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[Name], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [s].[Name0], [s].[Name1], [s].[Name2], [r1].[Name], [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[Id1], [r11].[Name], [r2].[Name], [r3].[Name], [r4].[Name], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r12].[Id1], [r12].[Name], [r5].[Name], [r6].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch] AS [r4] ON [r0].[RelationshipsRootId] = [r4].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r5] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r6] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r7].[RelationshipsTrunkRelationshipsRootId], [r7].[Id1], [r7].[Name], [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r8].[RelationshipsBranchId1], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r9].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r10].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r10].[Id1] AS [Id10], [r10].[Name] AS [Name0], [r8].[Name] AS [Name1], [r9].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r7]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r8] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[Id1] = [r8].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r9] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[Id1] = [r9].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r10] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[Id1] = [r10].[RelationshipsBranchId1]
) AS [s] ON [r0].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r11] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r12] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[Id1], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_trunk_collection(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_trunk_collection(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r].[Id], [s0].[RelationshipsRootId], [s0].[Id1], [s0].[Name], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchRelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchRelationshipsTrunkId10], [s0].[RelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsTrunkId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchRelationshipsTrunkId11], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s0].[RelationshipsBranchRelationshipsTrunkId12], [s0].[RelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsTrunkId11], [s0].[Id10], [s0].[Name0], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s0].[RelationshipsBranchRelationshipsTrunkId13], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s0].[RelationshipsBranchRelationshipsTrunkId100], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s0].[RelationshipsBranchRelationshipsTrunkId110], [s0].[RelationshipsBranchId11], [s0].[Id100], [s0].[Name00], [s0].[Name1], [s0].[Name2], [s0].[Name3], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s0].[RelationshipsBranchRelationshipsTrunkId14], [s0].[Id11], [s0].[Name4], [s0].[Name5], [s0].[Name6], [s0].[Name7], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s0].[RelationshipsBranchRelationshipsTrunkId15], [s0].[Id12], [s0].[Name8], [s0].[Name9], [s0].[Name10]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN (
    SELECT [r0].[RelationshipsRootId], [r0].[Id1], [r0].[Name], [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[RelationshipsTrunkId1], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkId1], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r3].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r4].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId0], [r4].[RelationshipsTrunkId1] AS [RelationshipsTrunkId10], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r5].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [r6].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId12], [s].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsTrunkId1] AS [RelationshipsTrunkId11], [s].[Id1] AS [Id10], [s].[Name] AS [Name0], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId13], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s].[RelationshipsBranchRelationshipsTrunkId10] AS [RelationshipsBranchRelationshipsTrunkId100], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s].[RelationshipsBranchRelationshipsTrunkId11] AS [RelationshipsBranchRelationshipsTrunkId110], [s].[RelationshipsBranchId11], [s].[Id10] AS [Id100], [s].[Name0] AS [Name00], [s].[Name1], [s].[Name2], [r1].[Name] AS [Name3], [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [r11].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId14], [r11].[Id1] AS [Id11], [r11].[Name] AS [Name4], [r2].[Name] AS [Name5], [r3].[Name] AS [Name6], [r4].[Name] AS [Name7], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [r12].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId15], [r12].[Id1] AS [Id12], [r12].[Name] AS [Name8], [r5].[Name] AS [Name9], [r6].[Name] AS [Name10]
    FROM [RelationshipsRoot_CollectionTrunk] AS [r0]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId] AND [r0].[Id1] = [r1].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[RelationshipsTrunkId1] = [r2].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[RelationshipsTrunkId1] = [r3].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch] AS [r4] ON [r0].[RelationshipsRootId] = [r4].[RelationshipsTrunkRelationshipsRootId] AND [r0].[Id1] = [r4].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r5] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r4].[RelationshipsTrunkId1] = [r5].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r6] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r4].[RelationshipsTrunkId1] = [r6].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN (
        SELECT [r7].[RelationshipsTrunkRelationshipsRootId], [r7].[RelationshipsTrunkId1], [r7].[Id1], [r7].[Name], [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r8].[RelationshipsBranchRelationshipsTrunkId1], [r8].[RelationshipsBranchId1], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r9].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r9].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r10].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r10].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r10].[Id1] AS [Id10], [r10].[Name] AS [Name0], [r8].[Name] AS [Name1], [r9].[Name] AS [Name2]
        FROM [RelationshipsRoot_CollectionTrunk_CollectionBranch] AS [r7]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r8] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[RelationshipsTrunkId1] = [r8].[RelationshipsBranchRelationshipsTrunkId1] AND [r7].[Id1] = [r8].[RelationshipsBranchId1]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r9] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[RelationshipsTrunkId1] = [r9].[RelationshipsBranchRelationshipsTrunkId1] AND [r7].[Id1] = [r9].[RelationshipsBranchId1]
        LEFT JOIN [RelationshipsRoot_CollectionTrunk_CollectionBranch_CollectionLeaf] AS [r10] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[RelationshipsTrunkId1] = [r10].[RelationshipsBranchRelationshipsTrunkId1] AND [r7].[Id1] = [r10].[RelationshipsBranchId1]
    ) AS [s] ON [r0].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId] AND [r0].[Id1] = [s].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r11] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[RelationshipsTrunkId1] = [r11].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r12] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r4].[RelationshipsTrunkId1] = [r12].[RelationshipsBranchRelationshipsTrunkId1]
) AS [s0] ON [r].[Id] = [s0].[RelationshipsRootId]
ORDER BY [r].[Id], [s0].[RelationshipsRootId], [s0].[Id1], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchRelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchRelationshipsTrunkId10], [s0].[RelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsTrunkId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchRelationshipsTrunkId11], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s0].[RelationshipsBranchRelationshipsTrunkId12], [s0].[RelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsTrunkId11], [s0].[Id10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s0].[RelationshipsBranchRelationshipsTrunkId13], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s0].[RelationshipsBranchRelationshipsTrunkId100], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s0].[RelationshipsBranchRelationshipsTrunkId110], [s0].[RelationshipsBranchId11], [s0].[Id100], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s0].[RelationshipsBranchRelationshipsTrunkId14], [s0].[Id11], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s0].[RelationshipsBranchRelationshipsTrunkId15]
""");
        }
    }

    public override async Task Select_branch_required_required(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_branch_required_required(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[Name], [r].[Id], [r0].[RelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[Id1], [r4].[Name], [r2].[Name], [r3].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r4] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_branch_required_optional(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_branch_required_optional(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[Name], [r].[Id], [r0].[RelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[Id1], [r4].[Name], [r2].[Name], [r3].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r4] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_branch_optional_required(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_branch_optional_required(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[Name], [r].[Id], [r0].[RelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[Id1], [r4].[Name], [r2].[Name], [r3].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r4] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_branch_optional_optional(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_branch_optional_optional(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[Name], [r].[Id], [r0].[RelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[Id1], [r4].[Name], [r2].[Name], [r3].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r4] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_branch_required_collection(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_branch_required_collection(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r].[Id], [r0].[RelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[Name], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [s].[Name0], [s].[Name1], [s].[Name2]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN (
    SELECT [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[Id1], [r1].[Name], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchId1], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r3].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r4].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r4].[Id1] AS [Id10], [r4].[Name] AS [Name0], [r2].[Name] AS [Name1], [r3].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[Id1] = [r2].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[Id1] = [r3].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r4] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[Id1] = [r4].[RelationshipsBranchId1]
) AS [s] ON [r0].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11]
""");
        }
    }

    public override async Task Select_branch_optional_collection(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_branch_optional_collection(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r].[Id], [r0].[RelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[Name], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [s].[Name0], [s].[Name1], [s].[Name2]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN (
    SELECT [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[Id1], [r1].[Name], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchId1], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r3].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r4].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r4].[Id1] AS [Id10], [r4].[Name] AS [Name0], [r2].[Name] AS [Name1], [r3].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[Id1] = [r2].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[Id1] = [r3].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r4] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[Id1] = [r4].[RelationshipsBranchId1]
) AS [s] ON [r0].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11]
""");
        }
    }

    #region Multiple

    public override async Task Select_root_duplicated(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_root_duplicated(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql(
                """
SELECT [r].[Id], [r].[Name], [r].[OptionalReferenceTrunkId], [r].[RequiredReferenceTrunkId], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r7].[RelationshipsRootId], [r8].[RelationshipsTrunkRelationshipsRootId], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[RelationshipsTrunkRelationshipsRootId], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsRootId], [s0].[Id1], [s0].[Name], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchRelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchRelationshipsTrunkId10], [s0].[RelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsTrunkId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchRelationshipsTrunkId11], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s0].[RelationshipsBranchRelationshipsTrunkId12], [s0].[RelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsTrunkId11], [s0].[Id10], [s0].[Name0], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s0].[RelationshipsBranchRelationshipsTrunkId13], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s0].[RelationshipsBranchRelationshipsTrunkId100], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s0].[RelationshipsBranchRelationshipsTrunkId110], [s0].[RelationshipsBranchId11], [s0].[Id100], [s0].[Name00], [s0].[Name1], [s0].[Name2], [s0].[Name3], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s0].[RelationshipsBranchRelationshipsTrunkId14], [s0].[Id11], [s0].[Name4], [s0].[Name5], [s0].[Name6], [s0].[Name7], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s0].[RelationshipsBranchRelationshipsTrunkId15], [s0].[Id12], [s0].[Name8], [s0].[Name9], [s0].[Name10], [r0].[Name], [s1].[RelationshipsTrunkRelationshipsRootId], [s1].[Id1], [s1].[Name], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s1].[RelationshipsBranchId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s1].[RelationshipsBranchId10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s1].[RelationshipsBranchId11], [s1].[Id10], [s1].[Name0], [s1].[Name1], [s1].[Name2], [r1].[Name], [r31].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r31].[Id1], [r31].[Name], [r2].[Name], [r3].[Name], [r4].[Name], [r32].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r32].[Id1], [r32].[Name], [r5].[Name], [r6].[Name], [r7].[Name], [s2].[RelationshipsTrunkRelationshipsRootId], [s2].[Id1], [s2].[Name], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s2].[RelationshipsBranchId1], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s2].[RelationshipsBranchId10], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s2].[RelationshipsBranchId11], [s2].[Id10], [s2].[Name0], [s2].[Name1], [s2].[Name2], [r8].[Name], [r37].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r37].[Id1], [r37].[Name], [r9].[Name], [r10].[Name], [r11].[Name], [r38].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r38].[Id1], [r38].[Name], [r12].[Name], [r13].[Name], [s4].[RelationshipsRootId], [s4].[Id1], [s4].[Name], [s4].[RelationshipsTrunkRelationshipsRootId], [s4].[RelationshipsTrunkId1], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s4].[RelationshipsBranchRelationshipsTrunkId1], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s4].[RelationshipsBranchRelationshipsTrunkId10], [s4].[RelationshipsTrunkRelationshipsRootId0], [s4].[RelationshipsTrunkId10], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s4].[RelationshipsBranchRelationshipsTrunkId11], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s4].[RelationshipsBranchRelationshipsTrunkId12], [s4].[RelationshipsTrunkRelationshipsRootId1], [s4].[RelationshipsTrunkId11], [s4].[Id10], [s4].[Name0], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s4].[RelationshipsBranchRelationshipsTrunkId13], [s4].[RelationshipsBranchId1], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s4].[RelationshipsBranchRelationshipsTrunkId100], [s4].[RelationshipsBranchId10], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s4].[RelationshipsBranchRelationshipsTrunkId110], [s4].[RelationshipsBranchId11], [s4].[Id100], [s4].[Name00], [s4].[Name1], [s4].[Name2], [s4].[Name3], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s4].[RelationshipsBranchRelationshipsTrunkId14], [s4].[Id11], [s4].[Name4], [s4].[Name5], [s4].[Name6], [s4].[Name7], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s4].[RelationshipsBranchRelationshipsTrunkId15], [s4].[Id12], [s4].[Name8], [s4].[Name9], [s4].[Name10], [s5].[RelationshipsTrunkRelationshipsRootId], [s5].[Id1], [s5].[Name], [s5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s5].[RelationshipsBranchId1], [s5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s5].[RelationshipsBranchId10], [s5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s5].[RelationshipsBranchId11], [s5].[Id10], [s5].[Name0], [s5].[Name1], [s5].[Name2], [r56].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r56].[Id1], [r56].[Name], [r57].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r57].[Id1], [r57].[Name], [s6].[RelationshipsTrunkRelationshipsRootId], [s6].[Id1], [s6].[Name], [s6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s6].[RelationshipsBranchId1], [s6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s6].[RelationshipsBranchId10], [s6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s6].[RelationshipsBranchId11], [s6].[Id10], [s6].[Name0], [s6].[Name1], [s6].[Name2], [r62].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r62].[Id1], [r62].[Name], [r63].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r63].[Id1], [r63].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_OptionalReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch] AS [r4] ON [r0].[RelationshipsRootId] = [r4].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r5] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r6] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r7] ON [r].[Id] = [r7].[RelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch] AS [r8] ON [r7].[RelationshipsRootId] = [r8].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r9] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r10] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch] AS [r11] ON [r7].[RelationshipsRootId] = [r11].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r12] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r13] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r14].[RelationshipsRootId], [r14].[Id1], [r14].[Name], [r15].[RelationshipsTrunkRelationshipsRootId], [r15].[RelationshipsTrunkId1], [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r16].[RelationshipsBranchRelationshipsTrunkId1], [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r17].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r18].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId0], [r18].[RelationshipsTrunkId1] AS [RelationshipsTrunkId10], [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r19].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r20].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [r20].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId12], [s].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsTrunkId1] AS [RelationshipsTrunkId11], [s].[Id1] AS [Id10], [s].[Name] AS [Name0], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId13], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s].[RelationshipsBranchRelationshipsTrunkId10] AS [RelationshipsBranchRelationshipsTrunkId100], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s].[RelationshipsBranchRelationshipsTrunkId11] AS [RelationshipsBranchRelationshipsTrunkId110], [s].[RelationshipsBranchId11], [s].[Id10] AS [Id100], [s].[Name0] AS [Name00], [s].[Name1], [s].[Name2], [r15].[Name] AS [Name3], [r25].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [r25].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId14], [r25].[Id1] AS [Id11], [r25].[Name] AS [Name4], [r16].[Name] AS [Name5], [r17].[Name] AS [Name6], [r18].[Name] AS [Name7], [r26].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [r26].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId15], [r26].[Id1] AS [Id12], [r26].[Name] AS [Name8], [r19].[Name] AS [Name9], [r20].[Name] AS [Name10]
    FROM [RelationshipsRoot_CollectionTrunk] AS [r14]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch] AS [r15] ON [r14].[RelationshipsRootId] = [r15].[RelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r15].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r16] ON [r15].[RelationshipsTrunkRelationshipsRootId] = [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r15].[RelationshipsTrunkId1] = [r16].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r17] ON [r15].[RelationshipsTrunkRelationshipsRootId] = [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r15].[RelationshipsTrunkId1] = [r17].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch] AS [r18] ON [r14].[RelationshipsRootId] = [r18].[RelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r18].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r19] ON [r18].[RelationshipsTrunkRelationshipsRootId] = [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r18].[RelationshipsTrunkId1] = [r19].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r20] ON [r18].[RelationshipsTrunkRelationshipsRootId] = [r20].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r18].[RelationshipsTrunkId1] = [r20].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN (
        SELECT [r21].[RelationshipsTrunkRelationshipsRootId], [r21].[RelationshipsTrunkId1], [r21].[Id1], [r21].[Name], [r22].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r22].[RelationshipsBranchRelationshipsTrunkId1], [r22].[RelationshipsBranchId1], [r23].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r23].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r23].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r24].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r24].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r24].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r24].[Id1] AS [Id10], [r24].[Name] AS [Name0], [r22].[Name] AS [Name1], [r23].[Name] AS [Name2]
        FROM [RelationshipsRoot_CollectionTrunk_CollectionBranch] AS [r21]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r22] ON [r21].[RelationshipsTrunkRelationshipsRootId] = [r22].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r21].[RelationshipsTrunkId1] = [r22].[RelationshipsBranchRelationshipsTrunkId1] AND [r21].[Id1] = [r22].[RelationshipsBranchId1]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r23] ON [r21].[RelationshipsTrunkRelationshipsRootId] = [r23].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r21].[RelationshipsTrunkId1] = [r23].[RelationshipsBranchRelationshipsTrunkId1] AND [r21].[Id1] = [r23].[RelationshipsBranchId1]
        LEFT JOIN [RelationshipsRoot_CollectionTrunk_CollectionBranch_CollectionLeaf] AS [r24] ON [r21].[RelationshipsTrunkRelationshipsRootId] = [r24].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r21].[RelationshipsTrunkId1] = [r24].[RelationshipsBranchRelationshipsTrunkId1] AND [r21].[Id1] = [r24].[RelationshipsBranchId1]
    ) AS [s] ON [r14].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [s].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r25] ON [r15].[RelationshipsTrunkRelationshipsRootId] = [r25].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r15].[RelationshipsTrunkId1] = [r25].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r26] ON [r18].[RelationshipsTrunkRelationshipsRootId] = [r26].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r18].[RelationshipsTrunkId1] = [r26].[RelationshipsBranchRelationshipsTrunkId1]
) AS [s0] ON [r].[Id] = [s0].[RelationshipsRootId]
LEFT JOIN (
    SELECT [r27].[RelationshipsTrunkRelationshipsRootId], [r27].[Id1], [r27].[Name], [r28].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r28].[RelationshipsBranchId1], [r29].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r29].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r30].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r30].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r30].[Id1] AS [Id10], [r30].[Name] AS [Name0], [r28].[Name] AS [Name1], [r29].[Name] AS [Name2]
    FROM [Root_OptionalReferenceTrunk_CollectionBranch] AS [r27]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r28] ON [r27].[RelationshipsTrunkRelationshipsRootId] = [r28].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r27].[Id1] = [r28].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r29] ON [r27].[RelationshipsTrunkRelationshipsRootId] = [r29].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r27].[Id1] = [r29].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r30] ON [r27].[RelationshipsTrunkRelationshipsRootId] = [r30].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r27].[Id1] = [r30].[RelationshipsBranchId1]
) AS [s1] ON [r0].[RelationshipsRootId] = [s1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r31] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r31].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r32] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r32].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r33].[RelationshipsTrunkRelationshipsRootId], [r33].[Id1], [r33].[Name], [r34].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r34].[RelationshipsBranchId1], [r35].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r35].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r36].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r36].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r36].[Id1] AS [Id10], [r36].[Name] AS [Name0], [r34].[Name] AS [Name1], [r35].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r33]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r34] ON [r33].[RelationshipsTrunkRelationshipsRootId] = [r34].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r33].[Id1] = [r34].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r35] ON [r33].[RelationshipsTrunkRelationshipsRootId] = [r35].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r33].[Id1] = [r35].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r36] ON [r33].[RelationshipsTrunkRelationshipsRootId] = [r36].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r33].[Id1] = [r36].[RelationshipsBranchId1]
) AS [s2] ON [r7].[RelationshipsRootId] = [s2].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r37] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r37].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r38] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r38].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r39].[RelationshipsRootId], [r39].[Id1], [r39].[Name], [r40].[RelationshipsTrunkRelationshipsRootId], [r40].[RelationshipsTrunkId1], [r41].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r41].[RelationshipsBranchRelationshipsTrunkId1], [r42].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r42].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r43].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId0], [r43].[RelationshipsTrunkId1] AS [RelationshipsTrunkId10], [r44].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r44].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r45].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [r45].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId12], [s3].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId1], [s3].[RelationshipsTrunkId1] AS [RelationshipsTrunkId11], [s3].[Id1] AS [Id10], [s3].[Name] AS [Name0], [s3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s3].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId13], [s3].[RelationshipsBranchId1], [s3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s3].[RelationshipsBranchRelationshipsTrunkId10] AS [RelationshipsBranchRelationshipsTrunkId100], [s3].[RelationshipsBranchId10], [s3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s3].[RelationshipsBranchRelationshipsTrunkId11] AS [RelationshipsBranchRelationshipsTrunkId110], [s3].[RelationshipsBranchId11], [s3].[Id10] AS [Id100], [s3].[Name0] AS [Name00], [s3].[Name1], [s3].[Name2], [r40].[Name] AS [Name3], [r50].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [r50].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId14], [r50].[Id1] AS [Id11], [r50].[Name] AS [Name4], [r41].[Name] AS [Name5], [r42].[Name] AS [Name6], [r43].[Name] AS [Name7], [r51].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [r51].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId15], [r51].[Id1] AS [Id12], [r51].[Name] AS [Name8], [r44].[Name] AS [Name9], [r45].[Name] AS [Name10]
    FROM [RelationshipsRoot_CollectionTrunk] AS [r39]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch] AS [r40] ON [r39].[RelationshipsRootId] = [r40].[RelationshipsTrunkRelationshipsRootId] AND [r39].[Id1] = [r40].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r41] ON [r40].[RelationshipsTrunkRelationshipsRootId] = [r41].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r40].[RelationshipsTrunkId1] = [r41].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r42] ON [r40].[RelationshipsTrunkRelationshipsRootId] = [r42].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r40].[RelationshipsTrunkId1] = [r42].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch] AS [r43] ON [r39].[RelationshipsRootId] = [r43].[RelationshipsTrunkRelationshipsRootId] AND [r39].[Id1] = [r43].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r44] ON [r43].[RelationshipsTrunkRelationshipsRootId] = [r44].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r43].[RelationshipsTrunkId1] = [r44].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r45] ON [r43].[RelationshipsTrunkRelationshipsRootId] = [r45].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r43].[RelationshipsTrunkId1] = [r45].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN (
        SELECT [r46].[RelationshipsTrunkRelationshipsRootId], [r46].[RelationshipsTrunkId1], [r46].[Id1], [r46].[Name], [r47].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r47].[RelationshipsBranchRelationshipsTrunkId1], [r47].[RelationshipsBranchId1], [r48].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r48].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r48].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r49].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r49].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r49].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r49].[Id1] AS [Id10], [r49].[Name] AS [Name0], [r47].[Name] AS [Name1], [r48].[Name] AS [Name2]
        FROM [RelationshipsRoot_CollectionTrunk_CollectionBranch] AS [r46]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r47] ON [r46].[RelationshipsTrunkRelationshipsRootId] = [r47].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r46].[RelationshipsTrunkId1] = [r47].[RelationshipsBranchRelationshipsTrunkId1] AND [r46].[Id1] = [r47].[RelationshipsBranchId1]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r48] ON [r46].[RelationshipsTrunkRelationshipsRootId] = [r48].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r46].[RelationshipsTrunkId1] = [r48].[RelationshipsBranchRelationshipsTrunkId1] AND [r46].[Id1] = [r48].[RelationshipsBranchId1]
        LEFT JOIN [RelationshipsRoot_CollectionTrunk_CollectionBranch_CollectionLeaf] AS [r49] ON [r46].[RelationshipsTrunkRelationshipsRootId] = [r49].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r46].[RelationshipsTrunkId1] = [r49].[RelationshipsBranchRelationshipsTrunkId1] AND [r46].[Id1] = [r49].[RelationshipsBranchId1]
    ) AS [s3] ON [r39].[RelationshipsRootId] = [s3].[RelationshipsTrunkRelationshipsRootId] AND [r39].[Id1] = [s3].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r50] ON [r40].[RelationshipsTrunkRelationshipsRootId] = [r50].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r40].[RelationshipsTrunkId1] = [r50].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r51] ON [r43].[RelationshipsTrunkRelationshipsRootId] = [r51].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r43].[RelationshipsTrunkId1] = [r51].[RelationshipsBranchRelationshipsTrunkId1]
) AS [s4] ON [r].[Id] = [s4].[RelationshipsRootId]
LEFT JOIN (
    SELECT [r52].[RelationshipsTrunkRelationshipsRootId], [r52].[Id1], [r52].[Name], [r53].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r53].[RelationshipsBranchId1], [r54].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r54].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r55].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r55].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r55].[Id1] AS [Id10], [r55].[Name] AS [Name0], [r53].[Name] AS [Name1], [r54].[Name] AS [Name2]
    FROM [Root_OptionalReferenceTrunk_CollectionBranch] AS [r52]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r53] ON [r52].[RelationshipsTrunkRelationshipsRootId] = [r53].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r52].[Id1] = [r53].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r54] ON [r52].[RelationshipsTrunkRelationshipsRootId] = [r54].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r52].[Id1] = [r54].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r55] ON [r52].[RelationshipsTrunkRelationshipsRootId] = [r55].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r52].[Id1] = [r55].[RelationshipsBranchId1]
) AS [s5] ON [r0].[RelationshipsRootId] = [s5].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r56] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r56].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r57] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r57].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r58].[RelationshipsTrunkRelationshipsRootId], [r58].[Id1], [r58].[Name], [r59].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r59].[RelationshipsBranchId1], [r60].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r60].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r61].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r61].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r61].[Id1] AS [Id10], [r61].[Name] AS [Name0], [r59].[Name] AS [Name1], [r60].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r58]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r59] ON [r58].[RelationshipsTrunkRelationshipsRootId] = [r59].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r58].[Id1] = [r59].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r60] ON [r58].[RelationshipsTrunkRelationshipsRootId] = [r60].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r58].[Id1] = [r60].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r61] ON [r58].[RelationshipsTrunkRelationshipsRootId] = [r61].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r58].[Id1] = [r61].[RelationshipsBranchId1]
) AS [s6] ON [r7].[RelationshipsRootId] = [s6].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r62] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r62].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r63] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r63].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r7].[RelationshipsRootId], [r8].[RelationshipsTrunkRelationshipsRootId], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[RelationshipsTrunkRelationshipsRootId], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsRootId], [s0].[Id1], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchRelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchRelationshipsTrunkId10], [s0].[RelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsTrunkId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchRelationshipsTrunkId11], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s0].[RelationshipsBranchRelationshipsTrunkId12], [s0].[RelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsTrunkId11], [s0].[Id10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s0].[RelationshipsBranchRelationshipsTrunkId13], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s0].[RelationshipsBranchRelationshipsTrunkId100], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s0].[RelationshipsBranchRelationshipsTrunkId110], [s0].[RelationshipsBranchId11], [s0].[Id100], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s0].[RelationshipsBranchRelationshipsTrunkId14], [s0].[Id11], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s0].[RelationshipsBranchRelationshipsTrunkId15], [s0].[Id12], [s1].[RelationshipsTrunkRelationshipsRootId], [s1].[Id1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s1].[RelationshipsBranchId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s1].[RelationshipsBranchId10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s1].[RelationshipsBranchId11], [s1].[Id10], [r31].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r31].[Id1], [r32].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r32].[Id1], [s2].[RelationshipsTrunkRelationshipsRootId], [s2].[Id1], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s2].[RelationshipsBranchId1], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s2].[RelationshipsBranchId10], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s2].[RelationshipsBranchId11], [s2].[Id10], [r37].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r37].[Id1], [r38].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r38].[Id1], [s4].[RelationshipsRootId], [s4].[Id1], [s4].[RelationshipsTrunkRelationshipsRootId], [s4].[RelationshipsTrunkId1], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s4].[RelationshipsBranchRelationshipsTrunkId1], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s4].[RelationshipsBranchRelationshipsTrunkId10], [s4].[RelationshipsTrunkRelationshipsRootId0], [s4].[RelationshipsTrunkId10], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s4].[RelationshipsBranchRelationshipsTrunkId11], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s4].[RelationshipsBranchRelationshipsTrunkId12], [s4].[RelationshipsTrunkRelationshipsRootId1], [s4].[RelationshipsTrunkId11], [s4].[Id10], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s4].[RelationshipsBranchRelationshipsTrunkId13], [s4].[RelationshipsBranchId1], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s4].[RelationshipsBranchRelationshipsTrunkId100], [s4].[RelationshipsBranchId10], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s4].[RelationshipsBranchRelationshipsTrunkId110], [s4].[RelationshipsBranchId11], [s4].[Id100], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s4].[RelationshipsBranchRelationshipsTrunkId14], [s4].[Id11], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s4].[RelationshipsBranchRelationshipsTrunkId15], [s4].[Id12], [s5].[RelationshipsTrunkRelationshipsRootId], [s5].[Id1], [s5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s5].[RelationshipsBranchId1], [s5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s5].[RelationshipsBranchId10], [s5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s5].[RelationshipsBranchId11], [s5].[Id10], [r56].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r56].[Id1], [r57].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r57].[Id1], [s6].[RelationshipsTrunkRelationshipsRootId], [s6].[Id1], [s6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s6].[RelationshipsBranchId1], [s6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s6].[RelationshipsBranchId10], [s6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s6].[RelationshipsBranchId11], [s6].[Id10], [r62].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r62].[Id1], [r63].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
        else
        {
            AssertSql(
                """
SELECT [r].[Id], [r].[Name], [r].[OptionalReferenceTrunkId], [r].[RequiredReferenceTrunkId], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r7].[RelationshipsRootId], [r8].[RelationshipsTrunkRelationshipsRootId], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[RelationshipsTrunkRelationshipsRootId], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsRootId], [s0].[Id1], [s0].[Name], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchRelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchRelationshipsTrunkId10], [s0].[RelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsTrunkId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchRelationshipsTrunkId11], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s0].[RelationshipsBranchRelationshipsTrunkId12], [s0].[RelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsTrunkId11], [s0].[Id10], [s0].[Name0], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s0].[RelationshipsBranchRelationshipsTrunkId13], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s0].[RelationshipsBranchRelationshipsTrunkId100], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s0].[RelationshipsBranchRelationshipsTrunkId110], [s0].[RelationshipsBranchId11], [s0].[Id100], [s0].[Name00], [s0].[Name1], [s0].[Name2], [s0].[Name3], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s0].[RelationshipsBranchRelationshipsTrunkId14], [s0].[Id11], [s0].[Name4], [s0].[Name5], [s0].[Name6], [s0].[Name7], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s0].[RelationshipsBranchRelationshipsTrunkId15], [s0].[Id12], [s0].[Name8], [s0].[Name9], [s0].[Name10], [r0].[Name], [s1].[RelationshipsTrunkRelationshipsRootId], [s1].[Id1], [s1].[Name], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s1].[RelationshipsBranchId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s1].[RelationshipsBranchId10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s1].[RelationshipsBranchId11], [s1].[Id10], [s1].[Name0], [s1].[Name1], [s1].[Name2], [r1].[Name], [r31].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r31].[Id1], [r31].[Name], [r2].[Name], [r3].[Name], [r4].[Name], [r32].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r32].[Id1], [r32].[Name], [r5].[Name], [r6].[Name], [r7].[Name], [s2].[RelationshipsTrunkRelationshipsRootId], [s2].[Id1], [s2].[Name], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s2].[RelationshipsBranchId1], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s2].[RelationshipsBranchId10], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s2].[RelationshipsBranchId11], [s2].[Id10], [s2].[Name0], [s2].[Name1], [s2].[Name2], [r8].[Name], [r37].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r37].[Id1], [r37].[Name], [r9].[Name], [r10].[Name], [r11].[Name], [r38].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r38].[Id1], [r38].[Name], [r12].[Name], [r13].[Name], [s4].[RelationshipsRootId], [s4].[Id1], [s4].[Name], [s4].[RelationshipsTrunkRelationshipsRootId], [s4].[RelationshipsTrunkId1], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s4].[RelationshipsBranchRelationshipsTrunkId1], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s4].[RelationshipsBranchRelationshipsTrunkId10], [s4].[RelationshipsTrunkRelationshipsRootId0], [s4].[RelationshipsTrunkId10], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s4].[RelationshipsBranchRelationshipsTrunkId11], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s4].[RelationshipsBranchRelationshipsTrunkId12], [s4].[RelationshipsTrunkRelationshipsRootId1], [s4].[RelationshipsTrunkId11], [s4].[Id10], [s4].[Name0], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s4].[RelationshipsBranchRelationshipsTrunkId13], [s4].[RelationshipsBranchId1], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s4].[RelationshipsBranchRelationshipsTrunkId100], [s4].[RelationshipsBranchId10], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s4].[RelationshipsBranchRelationshipsTrunkId110], [s4].[RelationshipsBranchId11], [s4].[Id100], [s4].[Name00], [s4].[Name1], [s4].[Name2], [s4].[Name3], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s4].[RelationshipsBranchRelationshipsTrunkId14], [s4].[Id11], [s4].[Name4], [s4].[Name5], [s4].[Name6], [s4].[Name7], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s4].[RelationshipsBranchRelationshipsTrunkId15], [s4].[Id12], [s4].[Name8], [s4].[Name9], [s4].[Name10], [s5].[RelationshipsTrunkRelationshipsRootId], [s5].[Id1], [s5].[Name], [s5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s5].[RelationshipsBranchId1], [s5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s5].[RelationshipsBranchId10], [s5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s5].[RelationshipsBranchId11], [s5].[Id10], [s5].[Name0], [s5].[Name1], [s5].[Name2], [r56].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r56].[Id1], [r56].[Name], [r57].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r57].[Id1], [r57].[Name], [s6].[RelationshipsTrunkRelationshipsRootId], [s6].[Id1], [s6].[Name], [s6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s6].[RelationshipsBranchId1], [s6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s6].[RelationshipsBranchId10], [s6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s6].[RelationshipsBranchId11], [s6].[Id10], [s6].[Name0], [s6].[Name1], [s6].[Name2], [r62].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r62].[Id1], [r62].[Name], [r63].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r63].[Id1], [r63].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_OptionalReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch] AS [r4] ON [r0].[RelationshipsRootId] = [r4].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r5] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r6] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r7] ON [r].[Id] = [r7].[RelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch] AS [r8] ON [r7].[RelationshipsRootId] = [r8].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r9] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r10] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch] AS [r11] ON [r7].[RelationshipsRootId] = [r11].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r12] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r13] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r14].[RelationshipsRootId], [r14].[Id1], [r14].[Name], [r15].[RelationshipsTrunkRelationshipsRootId], [r15].[RelationshipsTrunkId1], [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r16].[RelationshipsBranchRelationshipsTrunkId1], [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r17].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r18].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId0], [r18].[RelationshipsTrunkId1] AS [RelationshipsTrunkId10], [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r19].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r20].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [r20].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId12], [s].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsTrunkId1] AS [RelationshipsTrunkId11], [s].[Id1] AS [Id10], [s].[Name] AS [Name0], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId13], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s].[RelationshipsBranchRelationshipsTrunkId10] AS [RelationshipsBranchRelationshipsTrunkId100], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s].[RelationshipsBranchRelationshipsTrunkId11] AS [RelationshipsBranchRelationshipsTrunkId110], [s].[RelationshipsBranchId11], [s].[Id10] AS [Id100], [s].[Name0] AS [Name00], [s].[Name1], [s].[Name2], [r15].[Name] AS [Name3], [r25].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [r25].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId14], [r25].[Id1] AS [Id11], [r25].[Name] AS [Name4], [r16].[Name] AS [Name5], [r17].[Name] AS [Name6], [r18].[Name] AS [Name7], [r26].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [r26].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId15], [r26].[Id1] AS [Id12], [r26].[Name] AS [Name8], [r19].[Name] AS [Name9], [r20].[Name] AS [Name10]
    FROM [RelationshipsRoot_CollectionTrunk] AS [r14]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch] AS [r15] ON [r14].[RelationshipsRootId] = [r15].[RelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r15].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r16] ON [r15].[RelationshipsTrunkRelationshipsRootId] = [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r15].[RelationshipsTrunkId1] = [r16].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r17] ON [r15].[RelationshipsTrunkRelationshipsRootId] = [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r15].[RelationshipsTrunkId1] = [r17].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch] AS [r18] ON [r14].[RelationshipsRootId] = [r18].[RelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r18].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r19] ON [r18].[RelationshipsTrunkRelationshipsRootId] = [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r18].[RelationshipsTrunkId1] = [r19].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r20] ON [r18].[RelationshipsTrunkRelationshipsRootId] = [r20].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r18].[RelationshipsTrunkId1] = [r20].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN (
        SELECT [r21].[RelationshipsTrunkRelationshipsRootId], [r21].[RelationshipsTrunkId1], [r21].[Id1], [r21].[Name], [r22].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r22].[RelationshipsBranchRelationshipsTrunkId1], [r22].[RelationshipsBranchId1], [r23].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r23].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r23].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r24].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r24].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r24].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r24].[Id1] AS [Id10], [r24].[Name] AS [Name0], [r22].[Name] AS [Name1], [r23].[Name] AS [Name2]
        FROM [RelationshipsRoot_CollectionTrunk_CollectionBranch] AS [r21]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r22] ON [r21].[RelationshipsTrunkRelationshipsRootId] = [r22].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r21].[RelationshipsTrunkId1] = [r22].[RelationshipsBranchRelationshipsTrunkId1] AND [r21].[Id1] = [r22].[RelationshipsBranchId1]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r23] ON [r21].[RelationshipsTrunkRelationshipsRootId] = [r23].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r21].[RelationshipsTrunkId1] = [r23].[RelationshipsBranchRelationshipsTrunkId1] AND [r21].[Id1] = [r23].[RelationshipsBranchId1]
        LEFT JOIN [RelationshipsRoot_CollectionTrunk_CollectionBranch_CollectionLeaf] AS [r24] ON [r21].[RelationshipsTrunkRelationshipsRootId] = [r24].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r21].[RelationshipsTrunkId1] = [r24].[RelationshipsBranchRelationshipsTrunkId1] AND [r21].[Id1] = [r24].[RelationshipsBranchId1]
    ) AS [s] ON [r14].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [s].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r25] ON [r15].[RelationshipsTrunkRelationshipsRootId] = [r25].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r15].[RelationshipsTrunkId1] = [r25].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r26] ON [r18].[RelationshipsTrunkRelationshipsRootId] = [r26].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r18].[RelationshipsTrunkId1] = [r26].[RelationshipsBranchRelationshipsTrunkId1]
) AS [s0] ON [r].[Id] = [s0].[RelationshipsRootId]
LEFT JOIN (
    SELECT [r27].[RelationshipsTrunkRelationshipsRootId], [r27].[Id1], [r27].[Name], [r28].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r28].[RelationshipsBranchId1], [r29].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r29].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r30].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r30].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r30].[Id1] AS [Id10], [r30].[Name] AS [Name0], [r28].[Name] AS [Name1], [r29].[Name] AS [Name2]
    FROM [Root_OptionalReferenceTrunk_CollectionBranch] AS [r27]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r28] ON [r27].[RelationshipsTrunkRelationshipsRootId] = [r28].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r27].[Id1] = [r28].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r29] ON [r27].[RelationshipsTrunkRelationshipsRootId] = [r29].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r27].[Id1] = [r29].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r30] ON [r27].[RelationshipsTrunkRelationshipsRootId] = [r30].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r27].[Id1] = [r30].[RelationshipsBranchId1]
) AS [s1] ON [r0].[RelationshipsRootId] = [s1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r31] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r31].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r32] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r32].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r33].[RelationshipsTrunkRelationshipsRootId], [r33].[Id1], [r33].[Name], [r34].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r34].[RelationshipsBranchId1], [r35].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r35].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r36].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r36].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r36].[Id1] AS [Id10], [r36].[Name] AS [Name0], [r34].[Name] AS [Name1], [r35].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r33]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r34] ON [r33].[RelationshipsTrunkRelationshipsRootId] = [r34].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r33].[Id1] = [r34].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r35] ON [r33].[RelationshipsTrunkRelationshipsRootId] = [r35].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r33].[Id1] = [r35].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r36] ON [r33].[RelationshipsTrunkRelationshipsRootId] = [r36].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r33].[Id1] = [r36].[RelationshipsBranchId1]
) AS [s2] ON [r7].[RelationshipsRootId] = [s2].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r37] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r37].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r38] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r38].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r39].[RelationshipsRootId], [r39].[Id1], [r39].[Name], [r40].[RelationshipsTrunkRelationshipsRootId], [r40].[RelationshipsTrunkId1], [r41].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r41].[RelationshipsBranchRelationshipsTrunkId1], [r42].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r42].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r43].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId0], [r43].[RelationshipsTrunkId1] AS [RelationshipsTrunkId10], [r44].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r44].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r45].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [r45].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId12], [s3].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId1], [s3].[RelationshipsTrunkId1] AS [RelationshipsTrunkId11], [s3].[Id1] AS [Id10], [s3].[Name] AS [Name0], [s3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s3].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId13], [s3].[RelationshipsBranchId1], [s3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s3].[RelationshipsBranchRelationshipsTrunkId10] AS [RelationshipsBranchRelationshipsTrunkId100], [s3].[RelationshipsBranchId10], [s3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s3].[RelationshipsBranchRelationshipsTrunkId11] AS [RelationshipsBranchRelationshipsTrunkId110], [s3].[RelationshipsBranchId11], [s3].[Id10] AS [Id100], [s3].[Name0] AS [Name00], [s3].[Name1], [s3].[Name2], [r40].[Name] AS [Name3], [r50].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [r50].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId14], [r50].[Id1] AS [Id11], [r50].[Name] AS [Name4], [r41].[Name] AS [Name5], [r42].[Name] AS [Name6], [r43].[Name] AS [Name7], [r51].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [r51].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId15], [r51].[Id1] AS [Id12], [r51].[Name] AS [Name8], [r44].[Name] AS [Name9], [r45].[Name] AS [Name10]
    FROM [RelationshipsRoot_CollectionTrunk] AS [r39]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch] AS [r40] ON [r39].[RelationshipsRootId] = [r40].[RelationshipsTrunkRelationshipsRootId] AND [r39].[Id1] = [r40].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r41] ON [r40].[RelationshipsTrunkRelationshipsRootId] = [r41].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r40].[RelationshipsTrunkId1] = [r41].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r42] ON [r40].[RelationshipsTrunkRelationshipsRootId] = [r42].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r40].[RelationshipsTrunkId1] = [r42].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch] AS [r43] ON [r39].[RelationshipsRootId] = [r43].[RelationshipsTrunkRelationshipsRootId] AND [r39].[Id1] = [r43].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r44] ON [r43].[RelationshipsTrunkRelationshipsRootId] = [r44].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r43].[RelationshipsTrunkId1] = [r44].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r45] ON [r43].[RelationshipsTrunkRelationshipsRootId] = [r45].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r43].[RelationshipsTrunkId1] = [r45].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN (
        SELECT [r46].[RelationshipsTrunkRelationshipsRootId], [r46].[RelationshipsTrunkId1], [r46].[Id1], [r46].[Name], [r47].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r47].[RelationshipsBranchRelationshipsTrunkId1], [r47].[RelationshipsBranchId1], [r48].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r48].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r48].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r49].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r49].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r49].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r49].[Id1] AS [Id10], [r49].[Name] AS [Name0], [r47].[Name] AS [Name1], [r48].[Name] AS [Name2]
        FROM [RelationshipsRoot_CollectionTrunk_CollectionBranch] AS [r46]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r47] ON [r46].[RelationshipsTrunkRelationshipsRootId] = [r47].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r46].[RelationshipsTrunkId1] = [r47].[RelationshipsBranchRelationshipsTrunkId1] AND [r46].[Id1] = [r47].[RelationshipsBranchId1]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r48] ON [r46].[RelationshipsTrunkRelationshipsRootId] = [r48].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r46].[RelationshipsTrunkId1] = [r48].[RelationshipsBranchRelationshipsTrunkId1] AND [r46].[Id1] = [r48].[RelationshipsBranchId1]
        LEFT JOIN [RelationshipsRoot_CollectionTrunk_CollectionBranch_CollectionLeaf] AS [r49] ON [r46].[RelationshipsTrunkRelationshipsRootId] = [r49].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r46].[RelationshipsTrunkId1] = [r49].[RelationshipsBranchRelationshipsTrunkId1] AND [r46].[Id1] = [r49].[RelationshipsBranchId1]
    ) AS [s3] ON [r39].[RelationshipsRootId] = [s3].[RelationshipsTrunkRelationshipsRootId] AND [r39].[Id1] = [s3].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r50] ON [r40].[RelationshipsTrunkRelationshipsRootId] = [r50].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r40].[RelationshipsTrunkId1] = [r50].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r51] ON [r43].[RelationshipsTrunkRelationshipsRootId] = [r51].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r43].[RelationshipsTrunkId1] = [r51].[RelationshipsBranchRelationshipsTrunkId1]
) AS [s4] ON [r].[Id] = [s4].[RelationshipsRootId]
LEFT JOIN (
    SELECT [r52].[RelationshipsTrunkRelationshipsRootId], [r52].[Id1], [r52].[Name], [r53].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r53].[RelationshipsBranchId1], [r54].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r54].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r55].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r55].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r55].[Id1] AS [Id10], [r55].[Name] AS [Name0], [r53].[Name] AS [Name1], [r54].[Name] AS [Name2]
    FROM [Root_OptionalReferenceTrunk_CollectionBranch] AS [r52]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r53] ON [r52].[RelationshipsTrunkRelationshipsRootId] = [r53].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r52].[Id1] = [r53].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r54] ON [r52].[RelationshipsTrunkRelationshipsRootId] = [r54].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r52].[Id1] = [r54].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r55] ON [r52].[RelationshipsTrunkRelationshipsRootId] = [r55].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r52].[Id1] = [r55].[RelationshipsBranchId1]
) AS [s5] ON [r0].[RelationshipsRootId] = [s5].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r56] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r56].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r57] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r57].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r58].[RelationshipsTrunkRelationshipsRootId], [r58].[Id1], [r58].[Name], [r59].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r59].[RelationshipsBranchId1], [r60].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r60].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r61].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r61].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r61].[Id1] AS [Id10], [r61].[Name] AS [Name0], [r59].[Name] AS [Name1], [r60].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r58]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r59] ON [r58].[RelationshipsTrunkRelationshipsRootId] = [r59].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r58].[Id1] = [r59].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r60] ON [r58].[RelationshipsTrunkRelationshipsRootId] = [r60].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r58].[Id1] = [r60].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r61] ON [r58].[RelationshipsTrunkRelationshipsRootId] = [r61].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r58].[Id1] = [r61].[RelationshipsBranchId1]
) AS [s6] ON [r7].[RelationshipsRootId] = [s6].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r62] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r62].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r63] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r63].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r7].[RelationshipsRootId], [r8].[RelationshipsTrunkRelationshipsRootId], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[RelationshipsTrunkRelationshipsRootId], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsRootId], [s0].[Id1], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchRelationshipsTrunkId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchRelationshipsTrunkId10], [s0].[RelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsTrunkId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchRelationshipsTrunkId11], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s0].[RelationshipsBranchRelationshipsTrunkId12], [s0].[RelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsTrunkId11], [s0].[Id10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s0].[RelationshipsBranchRelationshipsTrunkId13], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s0].[RelationshipsBranchRelationshipsTrunkId100], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s0].[RelationshipsBranchRelationshipsTrunkId110], [s0].[RelationshipsBranchId11], [s0].[Id100], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s0].[RelationshipsBranchRelationshipsTrunkId14], [s0].[Id11], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s0].[RelationshipsBranchRelationshipsTrunkId15], [s0].[Id12], [s1].[RelationshipsTrunkRelationshipsRootId], [s1].[Id1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s1].[RelationshipsBranchId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s1].[RelationshipsBranchId10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s1].[RelationshipsBranchId11], [s1].[Id10], [r31].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r31].[Id1], [r32].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r32].[Id1], [s2].[RelationshipsTrunkRelationshipsRootId], [s2].[Id1], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s2].[RelationshipsBranchId1], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s2].[RelationshipsBranchId10], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s2].[RelationshipsBranchId11], [s2].[Id10], [r37].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r37].[Id1], [r38].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r38].[Id1], [s4].[RelationshipsRootId], [s4].[Id1], [s4].[RelationshipsTrunkRelationshipsRootId], [s4].[RelationshipsTrunkId1], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s4].[RelationshipsBranchRelationshipsTrunkId1], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s4].[RelationshipsBranchRelationshipsTrunkId10], [s4].[RelationshipsTrunkRelationshipsRootId0], [s4].[RelationshipsTrunkId10], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s4].[RelationshipsBranchRelationshipsTrunkId11], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s4].[RelationshipsBranchRelationshipsTrunkId12], [s4].[RelationshipsTrunkRelationshipsRootId1], [s4].[RelationshipsTrunkId11], [s4].[Id10], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s4].[RelationshipsBranchRelationshipsTrunkId13], [s4].[RelationshipsBranchId1], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s4].[RelationshipsBranchRelationshipsTrunkId100], [s4].[RelationshipsBranchId10], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s4].[RelationshipsBranchRelationshipsTrunkId110], [s4].[RelationshipsBranchId11], [s4].[Id100], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s4].[RelationshipsBranchRelationshipsTrunkId14], [s4].[Id11], [s4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s4].[RelationshipsBranchRelationshipsTrunkId15], [s4].[Id12], [s5].[RelationshipsTrunkRelationshipsRootId], [s5].[Id1], [s5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s5].[RelationshipsBranchId1], [s5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s5].[RelationshipsBranchId10], [s5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s5].[RelationshipsBranchId11], [s5].[Id10], [r56].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r56].[Id1], [r57].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r57].[Id1], [s6].[RelationshipsTrunkRelationshipsRootId], [s6].[Id1], [s6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s6].[RelationshipsBranchId1], [s6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s6].[RelationshipsBranchId10], [s6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s6].[RelationshipsBranchId11], [s6].[Id10], [r62].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r62].[Id1], [r63].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_trunk_and_branch_duplicated(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_trunk_and_branch_duplicated(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r0].[RelationshipsRootId], [r0].[Name], [r].[Id], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[Name], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [s].[Name0], [s].[Name1], [s].[Name2], [r1].[Name], [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[Id1], [r11].[Name], [r2].[Name], [r3].[Name], [r4].[Name], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r12].[Id1], [r12].[Name], [r5].[Name], [r6].[Name], [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r13].[Id1], [r13].[Name], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[Id1], [s0].[Name], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchId11], [s0].[Id10], [s0].[Name0], [s0].[Name1], [s0].[Name2], [r18].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r18].[Id1], [r18].[Name], [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r19].[Id1], [r19].[Name], [r20].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r20].[Id1], [r20].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_OptionalReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch] AS [r4] ON [r0].[RelationshipsRootId] = [r4].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r5] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r6] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r7].[RelationshipsTrunkRelationshipsRootId], [r7].[Id1], [r7].[Name], [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r8].[RelationshipsBranchId1], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r9].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r10].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r10].[Id1] AS [Id10], [r10].[Name] AS [Name0], [r8].[Name] AS [Name1], [r9].[Name] AS [Name2]
    FROM [Root_OptionalReferenceTrunk_CollectionBranch] AS [r7]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r8] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[Id1] = [r8].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r9] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[Id1] = [r9].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r10] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[Id1] = [r10].[RelationshipsBranchId1]
) AS [s] ON [r0].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r11] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r12] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r13] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r14].[RelationshipsTrunkRelationshipsRootId], [r14].[Id1], [r14].[Name], [r15].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r15].[RelationshipsBranchId1], [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r16].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r17].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r17].[Id1] AS [Id10], [r17].[Name] AS [Name0], [r15].[Name] AS [Name1], [r16].[Name] AS [Name2]
    FROM [Root_OptionalReferenceTrunk_CollectionBranch] AS [r14]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r15] ON [r14].[RelationshipsTrunkRelationshipsRootId] = [r15].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r15].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r16] ON [r14].[RelationshipsTrunkRelationshipsRootId] = [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r16].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r17] ON [r14].[RelationshipsTrunkRelationshipsRootId] = [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r17].[RelationshipsBranchId1]
) AS [s0] ON [r0].[RelationshipsRootId] = [s0].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r18] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r18].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r19] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r20] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r20].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[Id1], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r12].[Id1], [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r13].[Id1], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[Id1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchId11], [s0].[Id10], [r18].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r18].[Id1], [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r19].[Id1], [r20].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_trunk_and_trunk_duplicated(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_trunk_and_trunk_duplicated(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r0].[RelationshipsRootId], [r0].[Name], [r].[Id], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[Name], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [s].[Name0], [s].[Name1], [s].[Name2], [r1].[Name], [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[Id1], [r11].[Name], [r2].[Name], [r3].[Name], [r4].[Name], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r12].[Id1], [r12].[Name], [r5].[Name], [r6].[Name], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[Id1], [s0].[Name], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchId11], [s0].[Id10], [s0].[Name0], [s0].[Name1], [s0].[Name2], [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r17].[Id1], [r17].[Name], [r18].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r18].[Id1], [r18].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch] AS [r4] ON [r0].[RelationshipsRootId] = [r4].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r5] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r6] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r7].[RelationshipsTrunkRelationshipsRootId], [r7].[Id1], [r7].[Name], [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r8].[RelationshipsBranchId1], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r9].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r10].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r10].[Id1] AS [Id10], [r10].[Name] AS [Name0], [r8].[Name] AS [Name1], [r9].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r7]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r8] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[Id1] = [r8].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r9] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[Id1] = [r9].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r10] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[Id1] = [r10].[RelationshipsBranchId1]
) AS [s] ON [r0].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r11] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r12] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r13].[RelationshipsTrunkRelationshipsRootId], [r13].[Id1], [r13].[Name], [r14].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r14].[RelationshipsBranchId1], [r15].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r15].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r16].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r16].[Id1] AS [Id10], [r16].[Name] AS [Name0], [r14].[Name] AS [Name1], [r15].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r13]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r14] ON [r13].[RelationshipsTrunkRelationshipsRootId] = [r14].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r13].[Id1] = [r14].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r15] ON [r13].[RelationshipsTrunkRelationshipsRootId] = [r15].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r13].[Id1] = [r15].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r16] ON [r13].[RelationshipsTrunkRelationshipsRootId] = [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r13].[Id1] = [r16].[RelationshipsBranchId1]
) AS [s0] ON [r0].[RelationshipsRootId] = [s0].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r17] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r18] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r18].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[Id1], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r12].[Id1], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[Id1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchId11], [s0].[Id10], [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r17].[Id1], [r18].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_leaf_trunk_root(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_leaf_trunk_root(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r2].[Name], [r0].[RelationshipsRootId], [r0].[Name], [r].[Id], [r1].[RelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r7].[RelationshipsRootId], [r8].[RelationshipsTrunkRelationshipsRootId], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[RelationshipsTrunkRelationshipsRootId], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[Name], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [s].[Name0], [s].[Name1], [s].[Name2], [r3].[Name], [r18].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r18].[Id1], [r18].[Name], [r4].[Name], [r5].[Name], [r1].[Name], [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r19].[Id1], [r19].[Name], [r6].[Name], [r].[Name], [r].[OptionalReferenceTrunkId], [r].[RequiredReferenceTrunkId], [s1].[RelationshipsRootId], [s1].[Id1], [s1].[Name], [s1].[RelationshipsTrunkRelationshipsRootId], [s1].[RelationshipsTrunkId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s1].[RelationshipsBranchRelationshipsTrunkId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s1].[RelationshipsBranchRelationshipsTrunkId10], [s1].[RelationshipsTrunkRelationshipsRootId0], [s1].[RelationshipsTrunkId10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s1].[RelationshipsBranchRelationshipsTrunkId11], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s1].[RelationshipsBranchRelationshipsTrunkId12], [s1].[RelationshipsTrunkRelationshipsRootId1], [s1].[RelationshipsTrunkId11], [s1].[Id10], [s1].[Name0], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s1].[RelationshipsBranchRelationshipsTrunkId13], [s1].[RelationshipsBranchId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s1].[RelationshipsBranchRelationshipsTrunkId100], [s1].[RelationshipsBranchId10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s1].[RelationshipsBranchRelationshipsTrunkId110], [s1].[RelationshipsBranchId11], [s1].[Id100], [s1].[Name00], [s1].[Name1], [s1].[Name2], [s1].[Name3], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s1].[RelationshipsBranchRelationshipsTrunkId14], [s1].[Id11], [s1].[Name4], [s1].[Name5], [s1].[Name6], [s1].[Name7], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s1].[RelationshipsBranchRelationshipsTrunkId15], [s1].[Id12], [s1].[Name8], [s1].[Name9], [s1].[Name10], [r7].[Name], [s2].[RelationshipsTrunkRelationshipsRootId], [s2].[Id1], [s2].[Name], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s2].[RelationshipsBranchId1], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s2].[RelationshipsBranchId10], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s2].[RelationshipsBranchId11], [s2].[Id10], [s2].[Name0], [s2].[Name1], [s2].[Name2], [r8].[Name], [r37].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r37].[Id1], [r37].[Name], [r9].[Name], [r10].[Name], [r11].[Name], [r38].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r38].[Id1], [r38].[Name], [r12].[Name], [r13].[Name], [s3].[RelationshipsTrunkRelationshipsRootId], [s3].[Id1], [s3].[Name], [s3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s3].[RelationshipsBranchId1], [s3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s3].[RelationshipsBranchId10], [s3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s3].[RelationshipsBranchId11], [s3].[Id10], [s3].[Name0], [s3].[Name1], [s3].[Name2], [r43].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r43].[Id1], [r43].[Name], [r44].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r44].[Id1], [r44].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch] AS [r3] ON [r0].[RelationshipsRootId] = [r3].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r4] ON [r3].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r5] ON [r3].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r6] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk] AS [r7] ON [r].[Id] = [r7].[RelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch] AS [r8] ON [r7].[RelationshipsRootId] = [r8].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r9] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r10] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch] AS [r11] ON [r7].[RelationshipsRootId] = [r11].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r12] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r13] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r14].[RelationshipsTrunkRelationshipsRootId], [r14].[Id1], [r14].[Name], [r15].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r15].[RelationshipsBranchId1], [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r16].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r17].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r17].[Id1] AS [Id10], [r17].[Name] AS [Name0], [r15].[Name] AS [Name1], [r16].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r14]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r15] ON [r14].[RelationshipsTrunkRelationshipsRootId] = [r15].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r15].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r16] ON [r14].[RelationshipsTrunkRelationshipsRootId] = [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r16].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r17] ON [r14].[RelationshipsTrunkRelationshipsRootId] = [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r17].[RelationshipsBranchId1]
) AS [s] ON [r0].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r18] ON [r3].[RelationshipsTrunkRelationshipsRootId] = [r18].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r19] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r20].[RelationshipsRootId], [r20].[Id1], [r20].[Name], [r21].[RelationshipsTrunkRelationshipsRootId], [r21].[RelationshipsTrunkId1], [r22].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r22].[RelationshipsBranchRelationshipsTrunkId1], [r23].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r23].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r24].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId0], [r24].[RelationshipsTrunkId1] AS [RelationshipsTrunkId10], [r25].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r25].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r26].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [r26].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId12], [s0].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsTrunkId1] AS [RelationshipsTrunkId11], [s0].[Id1] AS [Id10], [s0].[Name] AS [Name0], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s0].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId13], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s0].[RelationshipsBranchRelationshipsTrunkId10] AS [RelationshipsBranchRelationshipsTrunkId100], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s0].[RelationshipsBranchRelationshipsTrunkId11] AS [RelationshipsBranchRelationshipsTrunkId110], [s0].[RelationshipsBranchId11], [s0].[Id10] AS [Id100], [s0].[Name0] AS [Name00], [s0].[Name1], [s0].[Name2], [r21].[Name] AS [Name3], [r31].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [r31].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId14], [r31].[Id1] AS [Id11], [r31].[Name] AS [Name4], [r22].[Name] AS [Name5], [r23].[Name] AS [Name6], [r24].[Name] AS [Name7], [r32].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [r32].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId15], [r32].[Id1] AS [Id12], [r32].[Name] AS [Name8], [r25].[Name] AS [Name9], [r26].[Name] AS [Name10]
    FROM [RelationshipsRoot_CollectionTrunk] AS [r20]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch] AS [r21] ON [r20].[RelationshipsRootId] = [r21].[RelationshipsTrunkRelationshipsRootId] AND [r20].[Id1] = [r21].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r22] ON [r21].[RelationshipsTrunkRelationshipsRootId] = [r22].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r21].[RelationshipsTrunkId1] = [r22].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r23] ON [r21].[RelationshipsTrunkRelationshipsRootId] = [r23].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r21].[RelationshipsTrunkId1] = [r23].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch] AS [r24] ON [r20].[RelationshipsRootId] = [r24].[RelationshipsTrunkRelationshipsRootId] AND [r20].[Id1] = [r24].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r25] ON [r24].[RelationshipsTrunkRelationshipsRootId] = [r25].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r24].[RelationshipsTrunkId1] = [r25].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r26] ON [r24].[RelationshipsTrunkRelationshipsRootId] = [r26].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r24].[RelationshipsTrunkId1] = [r26].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN (
        SELECT [r27].[RelationshipsTrunkRelationshipsRootId], [r27].[RelationshipsTrunkId1], [r27].[Id1], [r27].[Name], [r28].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r28].[RelationshipsBranchRelationshipsTrunkId1], [r28].[RelationshipsBranchId1], [r29].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r29].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r29].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r30].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r30].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r30].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r30].[Id1] AS [Id10], [r30].[Name] AS [Name0], [r28].[Name] AS [Name1], [r29].[Name] AS [Name2]
        FROM [RelationshipsRoot_CollectionTrunk_CollectionBranch] AS [r27]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r28] ON [r27].[RelationshipsTrunkRelationshipsRootId] = [r28].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r27].[RelationshipsTrunkId1] = [r28].[RelationshipsBranchRelationshipsTrunkId1] AND [r27].[Id1] = [r28].[RelationshipsBranchId1]
        LEFT JOIN [Root_CollectionTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r29] ON [r27].[RelationshipsTrunkRelationshipsRootId] = [r29].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r27].[RelationshipsTrunkId1] = [r29].[RelationshipsBranchRelationshipsTrunkId1] AND [r27].[Id1] = [r29].[RelationshipsBranchId1]
        LEFT JOIN [RelationshipsRoot_CollectionTrunk_CollectionBranch_CollectionLeaf] AS [r30] ON [r27].[RelationshipsTrunkRelationshipsRootId] = [r30].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r27].[RelationshipsTrunkId1] = [r30].[RelationshipsBranchRelationshipsTrunkId1] AND [r27].[Id1] = [r30].[RelationshipsBranchId1]
    ) AS [s0] ON [r20].[RelationshipsRootId] = [s0].[RelationshipsTrunkRelationshipsRootId] AND [r20].[Id1] = [s0].[RelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r31] ON [r21].[RelationshipsTrunkRelationshipsRootId] = [r31].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r21].[RelationshipsTrunkId1] = [r31].[RelationshipsBranchRelationshipsTrunkId1]
    LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r32] ON [r24].[RelationshipsTrunkRelationshipsRootId] = [r32].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r24].[RelationshipsTrunkId1] = [r32].[RelationshipsBranchRelationshipsTrunkId1]
) AS [s1] ON [r].[Id] = [s1].[RelationshipsRootId]
LEFT JOIN (
    SELECT [r33].[RelationshipsTrunkRelationshipsRootId], [r33].[Id1], [r33].[Name], [r34].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r34].[RelationshipsBranchId1], [r35].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r35].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r36].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r36].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r36].[Id1] AS [Id10], [r36].[Name] AS [Name0], [r34].[Name] AS [Name1], [r35].[Name] AS [Name2]
    FROM [Root_OptionalReferenceTrunk_CollectionBranch] AS [r33]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r34] ON [r33].[RelationshipsTrunkRelationshipsRootId] = [r34].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r33].[Id1] = [r34].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r35] ON [r33].[RelationshipsTrunkRelationshipsRootId] = [r35].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r33].[Id1] = [r35].[RelationshipsBranchId1]
    LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r36] ON [r33].[RelationshipsTrunkRelationshipsRootId] = [r36].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r33].[Id1] = [r36].[RelationshipsBranchId1]
) AS [s2] ON [r7].[RelationshipsRootId] = [s2].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r37] ON [r8].[RelationshipsTrunkRelationshipsRootId] = [r37].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r38] ON [r11].[RelationshipsTrunkRelationshipsRootId] = [r38].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r39].[RelationshipsTrunkRelationshipsRootId], [r39].[Id1], [r39].[Name], [r40].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r40].[RelationshipsBranchId1], [r41].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r41].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r42].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r42].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r42].[Id1] AS [Id10], [r42].[Name] AS [Name0], [r40].[Name] AS [Name1], [r41].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r39]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r40] ON [r39].[RelationshipsTrunkRelationshipsRootId] = [r40].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r39].[Id1] = [r40].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r41] ON [r39].[RelationshipsTrunkRelationshipsRootId] = [r41].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r39].[Id1] = [r41].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r42] ON [r39].[RelationshipsTrunkRelationshipsRootId] = [r42].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r39].[Id1] = [r42].[RelationshipsBranchId1]
) AS [s3] ON [r0].[RelationshipsRootId] = [s3].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r43] ON [r3].[RelationshipsTrunkRelationshipsRootId] = [r43].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r44] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r44].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r7].[RelationshipsRootId], [r8].[RelationshipsTrunkRelationshipsRootId], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[RelationshipsTrunkRelationshipsRootId], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [r18].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r18].[Id1], [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r19].[Id1], [s1].[RelationshipsRootId], [s1].[Id1], [s1].[RelationshipsTrunkRelationshipsRootId], [s1].[RelationshipsTrunkId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s1].[RelationshipsBranchRelationshipsTrunkId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s1].[RelationshipsBranchRelationshipsTrunkId10], [s1].[RelationshipsTrunkRelationshipsRootId0], [s1].[RelationshipsTrunkId10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s1].[RelationshipsBranchRelationshipsTrunkId11], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s1].[RelationshipsBranchRelationshipsTrunkId12], [s1].[RelationshipsTrunkRelationshipsRootId1], [s1].[RelationshipsTrunkId11], [s1].[Id10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId3], [s1].[RelationshipsBranchRelationshipsTrunkId13], [s1].[RelationshipsBranchId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId00], [s1].[RelationshipsBranchRelationshipsTrunkId100], [s1].[RelationshipsBranchId10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId10], [s1].[RelationshipsBranchRelationshipsTrunkId110], [s1].[RelationshipsBranchId11], [s1].[Id100], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId4], [s1].[RelationshipsBranchRelationshipsTrunkId14], [s1].[Id11], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId5], [s1].[RelationshipsBranchRelationshipsTrunkId15], [s1].[Id12], [s2].[RelationshipsTrunkRelationshipsRootId], [s2].[Id1], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s2].[RelationshipsBranchId1], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s2].[RelationshipsBranchId10], [s2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s2].[RelationshipsBranchId11], [s2].[Id10], [r37].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r37].[Id1], [r38].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r38].[Id1], [s3].[RelationshipsTrunkRelationshipsRootId], [s3].[Id1], [s3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s3].[RelationshipsBranchId1], [s3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s3].[RelationshipsBranchId10], [s3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s3].[RelationshipsBranchId11], [s3].[Id10], [r43].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r43].[Id1], [r44].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_multiple_branch_leaf(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_multiple_branch_leaf(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r].[Id], [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[Name], [r0].[RelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[Id1], [r4].[Name], [r2].[Name], [r3].[Name], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r5].[Id1], [r5].[Name], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[Name], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [s].[Name0], [s].[Name1], [s].[Name2]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r4] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r5] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r6].[RelationshipsTrunkRelationshipsRootId], [r6].[Id1], [r6].[Name], [r7].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r7].[RelationshipsBranchId1], [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r8].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r9].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r9].[Id1] AS [Id10], [r9].[Name] AS [Name0], [r7].[Name] AS [Name1], [r8].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r6]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r7] ON [r6].[RelationshipsTrunkRelationshipsRootId] = [r7].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r6].[Id1] = [r7].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r8] ON [r6].[RelationshipsTrunkRelationshipsRootId] = [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r6].[Id1] = [r8].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r9] ON [r6].[RelationshipsTrunkRelationshipsRootId] = [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r6].[Id1] = [r9].[RelationshipsBranchId1]
) AS [s] ON [r0].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[Id1], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r5].[Id1], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11]
""");
        }
    }

    #endregion Multiple

    #region Subquery

    public override async Task Select_subquery_root_set_required_trunk_FirstOrDefault_branch(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_subquery_root_set_required_trunk_FirstOrDefault_branch(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [s].[RelationshipsTrunkRelationshipsRootId], [s].[Name], [r].[Id], [s].[Id], [s].[RelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r5].[Id1], [r5].[Name], [s].[Name0], [s].[Name1]
FROM [RelationshipsRoot] AS [r]
OUTER APPLY (
    SELECT TOP(1) [r2].[RelationshipsTrunkRelationshipsRootId], [r2].[Name], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[Name] AS [Name0], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r4].[Name] AS [Name1], [r0].[Id], [r1].[RelationshipsRootId]
    FROM [RelationshipsRoot] AS [r0]
    LEFT JOIN [Root_RequiredReferenceTrunk] AS [r1] ON [r0].[Id] = [r1].[RelationshipsRootId]
    LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch] AS [r2] ON [r1].[RelationshipsRootId] = [r2].[RelationshipsTrunkRelationshipsRootId]
    LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r3] ON [r2].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
    LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r4] ON [r2].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
    ORDER BY [r0].[Id]
) AS [s]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r5] ON [s].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [s].[Id], [s].[RelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_subquery_root_set_optional_trunk_FirstOrDefault_branch(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_subquery_root_set_optional_trunk_FirstOrDefault_branch(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [s].[RelationshipsTrunkRelationshipsRootId], [s].[Name], [r].[Id], [s].[Id], [s].[RelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r5].[Id1], [r5].[Name], [s].[Name0], [s].[Name1]
FROM [RelationshipsRoot] AS [r]
OUTER APPLY (
    SELECT TOP(1) [r2].[RelationshipsTrunkRelationshipsRootId], [r2].[Name], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[Name] AS [Name0], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r4].[Name] AS [Name1], [r0].[Id], [r1].[RelationshipsRootId]
    FROM [RelationshipsRoot] AS [r0]
    LEFT JOIN [Root_OptionalReferenceTrunk] AS [r1] ON [r0].[Id] = [r1].[RelationshipsRootId]
    LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch] AS [r2] ON [r1].[RelationshipsRootId] = [r2].[RelationshipsTrunkRelationshipsRootId]
    LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r3] ON [r2].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
    LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r4] ON [r2].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
    ORDER BY [r0].[Id]
) AS [s]
LEFT JOIN [Root_OptionalReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r5] ON [s].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [s].[Id], [s].[RelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_subquery_root_set_trunk_FirstOrDefault_collection(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_subquery_root_set_trunk_FirstOrDefault_collection(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r].[Id], [s].[Id], [s].[RelationshipsRootId], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[Id1], [s0].[Name], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchId11], [s0].[Id10], [s0].[Name0], [s0].[Name1], [s0].[Name2], [s].[c]
FROM [RelationshipsRoot] AS [r]
OUTER APPLY (
    SELECT TOP(1) 1 AS [c], [r0].[Id], [r1].[RelationshipsRootId]
    FROM [RelationshipsRoot] AS [r0]
    LEFT JOIN [Root_RequiredReferenceTrunk] AS [r1] ON [r0].[Id] = [r1].[RelationshipsRootId]
    ORDER BY [r0].[Id]
) AS [s]
LEFT JOIN (
    SELECT [r2].[RelationshipsTrunkRelationshipsRootId], [r2].[Id1], [r2].[Name], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchId1], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r4].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r5].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r5].[Id1] AS [Id10], [r5].[Name] AS [Name0], [r3].[Name] AS [Name1], [r4].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r2]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r3] ON [r2].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r2].[Id1] = [r3].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r4] ON [r2].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r2].[Id1] = [r4].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r5] ON [r2].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r2].[Id1] = [r5].[RelationshipsBranchId1]
) AS [s0] ON [s].[RelationshipsRootId] = [s0].[RelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [s].[Id], [s].[RelationshipsRootId], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[Id1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchId11]
""");
        }
    }

    public override async Task Select_subquery_root_set_complex_projection_including_references_to_outer_FirstOrDefault(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_subquery_root_set_complex_projection_including_references_to_outer_FirstOrDefault(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [s].[Id], [s].[RelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[Id1], [s0].[Name], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchId11], [s0].[Id10], [s0].[Name0], [s0].[Name1], [s0].[Name2], [s].[Name], [s1].[RelationshipsTrunkRelationshipsRootId], [s1].[Id1], [s1].[Name], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s1].[RelationshipsBranchId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s1].[RelationshipsBranchId10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s1].[RelationshipsBranchId11], [s1].[Id10], [s1].[Name0], [s1].[Name1], [s1].[Name2], [s].[Name0], [r18].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r18].[Id1], [r18].[Name], [s].[Name1], [s].[Name2], [s].[Name3], [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r19].[Id1], [r19].[Name], [s].[Name4], [s].[Name5], [r20].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r20].[Id1], [r20].[Name], [s].[Name6], [s].[c]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
OUTER APPLY (
    SELECT TOP(1) [r3].[RelationshipsRootId], [r3].[Name], [r4].[RelationshipsTrunkRelationshipsRootId], [r4].[Name] AS [Name0], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r5].[Name] AS [Name1], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r6].[Name] AS [Name2], [r7].[RelationshipsTrunkRelationshipsRootId] AS [RelationshipsTrunkRelationshipsRootId0], [r7].[Name] AS [Name3], [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r8].[Name] AS [Name4], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [r9].[Name] AS [Name5], [r1].[Name] AS [Name6], 1 AS [c], [r2].[Id]
    FROM [RelationshipsRoot] AS [r2]
    LEFT JOIN [Root_RequiredReferenceTrunk] AS [r3] ON [r2].[Id] = [r3].[RelationshipsRootId]
    LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch] AS [r4] ON [r3].[RelationshipsRootId] = [r4].[RelationshipsTrunkRelationshipsRootId]
    LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r5] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
    LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r6] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
    LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch] AS [r7] ON [r3].[RelationshipsRootId] = [r7].[RelationshipsTrunkRelationshipsRootId]
    LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r8] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
    LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r9] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
    ORDER BY [r2].[Id]
) AS [s]
LEFT JOIN (
    SELECT [r10].[RelationshipsTrunkRelationshipsRootId], [r10].[Id1], [r10].[Name], [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[RelationshipsBranchId1], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r12].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r13].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r13].[Id1] AS [Id10], [r13].[Name] AS [Name0], [r11].[Name] AS [Name1], [r12].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r10]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r11] ON [r10].[RelationshipsTrunkRelationshipsRootId] = [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r10].[Id1] = [r11].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r12] ON [r10].[RelationshipsTrunkRelationshipsRootId] = [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r10].[Id1] = [r12].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r13] ON [r10].[RelationshipsTrunkRelationshipsRootId] = [r13].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r10].[Id1] = [r13].[RelationshipsBranchId1]
) AS [s0] ON [r0].[RelationshipsRootId] = [s0].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN (
    SELECT [r14].[RelationshipsTrunkRelationshipsRootId], [r14].[Id1], [r14].[Name], [r15].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r15].[RelationshipsBranchId1], [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r16].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r17].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r17].[Id1] AS [Id10], [r17].[Name] AS [Name0], [r15].[Name] AS [Name1], [r16].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r14]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r15] ON [r14].[RelationshipsTrunkRelationshipsRootId] = [r15].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r15].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r16] ON [r14].[RelationshipsTrunkRelationshipsRootId] = [r16].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r16].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r17] ON [r14].[RelationshipsTrunkRelationshipsRootId] = [r17].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r14].[Id1] = [r17].[RelationshipsBranchId1]
) AS [s1] ON [s].[RelationshipsRootId] = [s1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r18] ON [s].[RelationshipsTrunkRelationshipsRootId] = [r18].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r19] ON [s].[RelationshipsTrunkRelationshipsRootId0] = [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r20] ON [s].[RelationshipsTrunkRelationshipsRootId0] = [r20].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [s].[Id], [s].[RelationshipsRootId], [s].[RelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId2], [s0].[RelationshipsTrunkRelationshipsRootId], [s0].[Id1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s0].[RelationshipsBranchId1], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s0].[RelationshipsBranchId10], [s0].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s0].[RelationshipsBranchId11], [s0].[Id10], [s1].[RelationshipsTrunkRelationshipsRootId], [s1].[Id1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s1].[RelationshipsBranchId1], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s1].[RelationshipsBranchId10], [s1].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s1].[RelationshipsBranchId11], [s1].[Id10], [r18].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r18].[Id1], [r19].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r19].[Id1], [r20].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId]
""");
        }
    }

    public override async Task Select_subquery_root_set_complex_projection_FirstOrDefault_project_reference_to_outer(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.Select_subquery_root_set_complex_projection_FirstOrDefault_project_reference_to_outer(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r].[Id], [r0].[RelationshipsRootId], [r6].[Id], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[Name], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11], [s].[Id10], [s].[Name0], [s].[Name1], [s].[Name2], [r6].[c]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
OUTER APPLY (
    SELECT TOP(1) 1 AS [c], [r1].[Id]
    FROM [RelationshipsRoot] AS [r1]
    ORDER BY [r1].[Id]
) AS [r6]
LEFT JOIN (
    SELECT [r2].[RelationshipsTrunkRelationshipsRootId], [r2].[Id1], [r2].[Name], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchId1], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r4].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r5].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r5].[Id1] AS [Id10], [r5].[Name] AS [Name0], [r3].[Name] AS [Name1], [r4].[Name] AS [Name2]
    FROM [Root_RequiredReferenceTrunk_CollectionBranch] AS [r2]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r3] ON [r2].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r2].[Id1] = [r3].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r4] ON [r2].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r2].[Id1] = [r4].[RelationshipsBranchId1]
    LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r5] ON [r2].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r2].[Id1] = [r5].[RelationshipsBranchId1]
) AS [s] ON [r0].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r6].[Id], [s].[RelationshipsTrunkRelationshipsRootId], [s].[Id1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchId11]
""");
        }
    }

    #endregion Subquery

    #region SelectMany

    public override async Task SelectMany_trunk_collection(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.SelectMany_trunk_collection(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r0].[RelationshipsRootId], [r0].[Id1], [r0].[Name], [r].[Id], [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[RelationshipsTrunkId1], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkId1], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkId1], [r4].[RelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkId1], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkId1], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkId1], [s].[RelationshipsTrunkRelationshipsRootId], [s].[RelationshipsTrunkId1], [s].[Id1], [s].[Name], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkId1], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchRelationshipsTrunkId10], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchRelationshipsTrunkId11], [s].[RelationshipsBranchId11], [s].[Id10], [s].[Name0], [s].[Name1], [s].[Name2], [r1].[Name], [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[RelationshipsBranchRelationshipsTrunkId1], [r11].[Id1], [r11].[Name], [r2].[Name], [r3].[Name], [r4].[Name], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r12].[RelationshipsBranchRelationshipsTrunkId1], [r12].[Id1], [r12].[Name], [r5].[Name], [r6].[Name]
FROM [RelationshipsRoot] AS [r]
INNER JOIN [RelationshipsRoot_CollectionTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId] AND [r0].[Id1] = [r1].[RelationshipsTrunkId1]
LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[RelationshipsTrunkId1] = [r2].[RelationshipsBranchRelationshipsTrunkId1]
LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[RelationshipsTrunkId1] = [r3].[RelationshipsBranchRelationshipsTrunkId1]
LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch] AS [r4] ON [r0].[RelationshipsRootId] = [r4].[RelationshipsTrunkRelationshipsRootId] AND [r0].[Id1] = [r4].[RelationshipsTrunkId1]
LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_OptionalReferenceLeaf] AS [r5] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r4].[RelationshipsTrunkId1] = [r5].[RelationshipsBranchRelationshipsTrunkId1]
LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_RequiredReferenceLeaf] AS [r6] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r4].[RelationshipsTrunkId1] = [r6].[RelationshipsBranchRelationshipsTrunkId1]
LEFT JOIN (
    SELECT [r7].[RelationshipsTrunkRelationshipsRootId], [r7].[RelationshipsTrunkId1], [r7].[Id1], [r7].[Name], [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r8].[RelationshipsBranchRelationshipsTrunkId1], [r8].[RelationshipsBranchId1], [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [r9].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId10], [r9].[RelationshipsBranchId1] AS [RelationshipsBranchId10], [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AS [RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [r10].[RelationshipsBranchRelationshipsTrunkId1] AS [RelationshipsBranchRelationshipsTrunkId11], [r10].[RelationshipsBranchId1] AS [RelationshipsBranchId11], [r10].[Id1] AS [Id10], [r10].[Name] AS [Name0], [r8].[Name] AS [Name1], [r9].[Name] AS [Name2]
    FROM [RelationshipsRoot_CollectionTrunk_CollectionBranch] AS [r7]
    LEFT JOIN [Root_CollectionTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r8] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r8].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[RelationshipsTrunkId1] = [r8].[RelationshipsBranchRelationshipsTrunkId1] AND [r7].[Id1] = [r8].[RelationshipsBranchId1]
    LEFT JOIN [Root_CollectionTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r9] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r9].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[RelationshipsTrunkId1] = [r9].[RelationshipsBranchRelationshipsTrunkId1] AND [r7].[Id1] = [r9].[RelationshipsBranchId1]
    LEFT JOIN [RelationshipsRoot_CollectionTrunk_CollectionBranch_CollectionLeaf] AS [r10] ON [r7].[RelationshipsTrunkRelationshipsRootId] = [r10].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r7].[RelationshipsTrunkId1] = [r10].[RelationshipsBranchRelationshipsTrunkId1] AND [r7].[Id1] = [r10].[RelationshipsBranchId1]
) AS [s] ON [r0].[RelationshipsRootId] = [s].[RelationshipsTrunkRelationshipsRootId] AND [r0].[Id1] = [s].[RelationshipsTrunkId1]
LEFT JOIN [Root_CollectionTrunk_OptionalReferenceBranch_CollectionLeaf] AS [r11] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[RelationshipsTrunkId1] = [r11].[RelationshipsBranchRelationshipsTrunkId1]
LEFT JOIN [Root_CollectionTrunk_RequiredReferenceBranch_CollectionLeaf] AS [r12] ON [r4].[RelationshipsTrunkRelationshipsRootId] = [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r4].[RelationshipsTrunkId1] = [r12].[RelationshipsBranchRelationshipsTrunkId1]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r0].[Id1], [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[RelationshipsTrunkId1], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkId1], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchRelationshipsTrunkId1], [r4].[RelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsTrunkId1], [r5].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r5].[RelationshipsBranchRelationshipsTrunkId1], [r6].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r6].[RelationshipsBranchRelationshipsTrunkId1], [s].[RelationshipsTrunkRelationshipsRootId], [s].[RelationshipsTrunkId1], [s].[Id1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [s].[RelationshipsBranchRelationshipsTrunkId1], [s].[RelationshipsBranchId1], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId0], [s].[RelationshipsBranchRelationshipsTrunkId10], [s].[RelationshipsBranchId10], [s].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId1], [s].[RelationshipsBranchRelationshipsTrunkId11], [s].[RelationshipsBranchId11], [s].[Id10], [r11].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r11].[RelationshipsBranchRelationshipsTrunkId1], [r11].[Id1], [r12].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r12].[RelationshipsBranchRelationshipsTrunkId1]
""");
        }
    }

    public override async Task SelectMany_required_trunk_reference_branch_collection(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.SelectMany_required_trunk_reference_branch_collection(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[Id1], [r1].[Name], [r].[Id], [r0].[RelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchId1], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchId1], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchId1], [r4].[Id1], [r4].[Name], [r2].[Name], [r3].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_RequiredReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
INNER JOIN [Root_RequiredReferenceTrunk_CollectionBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[Id1] = [r2].[RelationshipsBranchId1]
LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[Id1] = [r3].[RelationshipsBranchId1]
LEFT JOIN [Root_RequiredReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r4] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[Id1] = [r4].[RelationshipsBranchId1]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[Id1], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchId1], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchId1], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchId1]
""");
        }
    }

    public override async Task SelectMany_optional_trunk_reference_branch_collection(bool async, QueryTrackingBehavior queryTrackingBehavior)
    {
        await base.SelectMany_optional_trunk_reference_branch_collection(async, queryTrackingBehavior);

        if (queryTrackingBehavior is QueryTrackingBehavior.TrackAll)
        {
            AssertSql();
        }
        else
        {
            AssertSql(
                """
SELECT [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[Id1], [r1].[Name], [r].[Id], [r0].[RelationshipsRootId], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchId1], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchId1], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchId1], [r4].[Id1], [r4].[Name], [r2].[Name], [r3].[Name]
FROM [RelationshipsRoot] AS [r]
LEFT JOIN [Root_OptionalReferenceTrunk] AS [r0] ON [r].[Id] = [r0].[RelationshipsRootId]
INNER JOIN [Root_OptionalReferenceTrunk_CollectionBranch] AS [r1] ON [r0].[RelationshipsRootId] = [r1].[RelationshipsTrunkRelationshipsRootId]
LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_OptionalReferenceLeaf] AS [r2] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[Id1] = [r2].[RelationshipsBranchId1]
LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_RequiredReferenceLeaf] AS [r3] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[Id1] = [r3].[RelationshipsBranchId1]
LEFT JOIN [Root_OptionalReferenceTrunk_CollectionBranch_CollectionLeaf] AS [r4] ON [r1].[RelationshipsTrunkRelationshipsRootId] = [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId] AND [r1].[Id1] = [r4].[RelationshipsBranchId1]
ORDER BY [r].[Id], [r0].[RelationshipsRootId], [r1].[RelationshipsTrunkRelationshipsRootId], [r1].[Id1], [r2].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r2].[RelationshipsBranchId1], [r3].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r3].[RelationshipsBranchId1], [r4].[RelationshipsBranchRelationshipsTrunkRelationshipsRootId], [r4].[RelationshipsBranchId1]
""");
        }
    }

    #endregion SelectMany

    [ConditionalFact]
    public virtual void Check_all_tests_overridden()
        => TestHelpers.AssertAllMethodsOverridden(GetType());

    private void AssertSql(params string[] expected)
        => Fixture.TestSqlLoggerFactory.AssertBaseline(expected);
}
